webpackJsonp([19],{"0pJF":function(e,r,t){var n=t("nzQN");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("4c6b2783",n,!0,{})},ANjj:function(e,r,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.dialog-fastener[data-v-64590d20] {\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  position: absolute;\r\n  text-align: center;\r\n  z-index: 100;\n}\n.dialog-fastener-content[data-v-64590d20] {\r\n  width: 550px;\r\n  height: auto;\r\n  position: relative;\r\n  padding: 20px 50px;\r\n  border-radius: 15px;\r\n  background-color: white;\r\n  top: 50%;\r\n  left: 50%;\r\n  -webkit-transform: translate(-50%, -50%);\r\n          transform: translate(-50%, -50%);\n}\n.dialog-fastener-title[data-v-64590d20] {\r\n  font-size: 25px;\r\n  margin-bottom: 20px;\n}\ntable[data-v-64590d20] {\r\n  width: 100%;\r\n  table-layout: fixed;\n}\ntable td[data-v-64590d20] {\r\n  height: 50%;\n}\ntd tr[data-v-64590d20] {\r\n  width: 25%;\n}\ntable img[data-v-64590d20] {\r\n  width: 65px;\r\n  height: 65px;\r\n  margin: 0 auto;\n}\n.dialog-input[data-v-64590d20] {\r\n  width: 50px;\r\n  height: 50px;\r\n  margin: 14px auto 22px auto;\r\n  line-height: 50px;\r\n  color: #595959;\r\n  font-size: 28px;\r\n  text-align: center;\r\n  background-color: white;\r\n  border-radius: 5px;\r\n  border: 3px solid #bfbfbf;\n}\n.dialog-input-selected[data-v-64590d20] {\r\n  border-color: black;\n}\n.dialog-cancel[data-v-64590d20] {\r\n  color: white;\r\n  font-size: 26px;\r\n  background-color: rgb(199, 51, 46);\r\n  border-radius: 10px;\r\n  border: 3px solid white;\r\n  margin-right: 87px;\r\n  padding: 3px 0 3px 20px;\r\n  word-spacing: 20px;\r\n  letter-spacing: 20px;\n}\n.dialog-confirm[data-v-64590d20] {\r\n  color: white;\r\n  font-size: 26px;\r\n  background-color: rgb(130, 202, 37);\r\n  border-radius: 10px;\r\n  border: 3px solid white;\r\n  padding: 3px 0 3px 20px;\r\n  word-spacing: 20px;\r\n  letter-spacing: 20px;\n}\r\n",""])},MsPD:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("mvHQ"),a=t.n(n),s=t("JaHG"),i={name:"DialogFastener",data:function(){return{isShow:!1,fObjects:[{"square-blue-2":0,"square-red-2":0,"square-blue-4":0,"square-red-4":0},{"circle-blue-2":0,"circle-red-2":0,"circle-blue-4":0,"circle-red-4":0}],sFObject:null,sKey:"",fCounts:null,fasteners:[{name:"block-element",type:"block-image",wareType:"circle-red-2",src:"./static/images/area/fastener-circle-red-2.png",transX:300,transY:300,width:60,height:60,preTransX:300,preTransY:300},{name:"block-element",type:"block-image",wareType:"circle-red-4",src:"./static/images/area/fastener-circle-red-4.png",transX:800,transY:200,width:60,height:60,preTransX:800,preTransY:200},{name:"block-element",type:"block-image",wareType:"square-red-2",src:"./static/images/area/fastener-square-red-2.png",transX:400,transY:250,width:60,height:60,preTransX:400,preTransY:250},{name:"block-element",type:"block-image",wareType:"square-red-4",src:"./static/images/area/fastener-square-red-4.png",transX:540,transY:330,width:60,height:60,preTransX:540,preTransY:330},{name:"block-element",type:"block-image",wareType:"circle-blue-2",src:"./static/images/area/fastener-circle-blue-2.png",transX:666,transY:340,width:60,height:60,preTransX:666,preTransY:340},{name:"block-element",type:"block-image",wareType:"circle-blue-4",src:"./static/images/area/fastener-circle-blue-4.png",transX:385,transY:340,width:60,height:60,preTransX:385,preTransY:340},{name:"block-element",type:"block-image",wareType:"square-blue-2",src:"./static/images/area/fastener-square-blue-2.png",transX:750,transY:310,width:60,height:60,preTransX:750,preTransY:310},{name:"block-element",type:"block-image",wareType:"square-blue-4",src:"./static/images/area/fastener-square-blue-4.png",transX:458,transY:200,width:60,height:60,preTransX:458,preTransY:200}]}},computed:{},methods:{setWareObj:function(e){this.wareObj=e},showFastenerDialog:function(e){var r=this;if(!e||!this.isShow){if(this.sKey="",this.isShow=e,!this.isShow)return this.sFObject=null,void this.$root.editorManager.hideCounter();this.wareObj&&"fastener"===this.wareObj.type&&(this.fObjects.forEach(function(e){for(var r in e)e.hasOwnProperty(r)&&(e[r]=0)}),this.wareObj.instances.forEach(function(e){for(var t=0;t<r.fObjects.length;t++)for(var n in r.fObjects[t])if(r.fObjects[t].hasOwnProperty(n)&&e.params.wareType===n){r.fObjects[t][n]++;break}}),this.fCounts=JSON.parse(a()(this.fObjects)))}},onInputFocus:function(e,r){var t=this;this.sFObject=e,this.sKey=r,this.$root.editorManager.showCounter(function(e){if(t.sFObject){var r=""+t.sFObject[t.sKey];if(e){if("confirm"===e)return t.saveFastenerCount(),void t.showFastenerDialog(!1);t.sFObject[t.sKey]=e}else 2===r.length?r=r[0]:r.length<=1&&(r="0"),r=parseInt(r),t.sFObject[t.sKey]=r}})},saveFastenerCount:function(){var e=this;if(this.wareObj&&"fastener"===this.wareObj.type){this.fObjects.forEach(function(r,t){for(var n in r)if(r.hasOwnProperty(n)){var s=r[n]-e.fCounts[t][n];if(s>0){for(var i=void 0,o=e.fasteners,c=o.length,l=0;l<c;l++)if(o[l].wareType===n){i=o[l];break}if(s>0)for(var d=0;d<s;){var p=JSON.parse(a()(i));e.$root.editorManager.loadBlockData(p).setSectionMode(e.$root.editorManager.sectionMode),d++}e.wareObj.resetChangeApply&&e.wareObj.resetChangeApply()}else if(s<0){for(var g=s;g<0;){for(var h=0;h<e.wareObj.instances.length;h++)if(e.wareObj.instances[h].params.wareType===n){e.$root.editorManager.setSelectedObject({instance:e.wareObj.instances[h],type:0}),e.$root.editorManager.delete();break}g++}e.wareObj.resetChangeApply&&e.wareObj.resetChangeApply()}}});var r=Object(s.c)(this.wareObj.instances.length,70,100,130);this.wareObj.instances.forEach(function(e,t){e.params.transX=r[t].x,e.params.transY=r[t].y})}this.showFastenerDialog(!1)},onClickDiv:function(){}},created:function(){},mounted:function(){var e=this,r=document.createElement("BUTTON");r.innerHTML="扣子设定",r.classList.add("dialog-fastener-btn"),r.addEventListener("click",function(r){r.stopPropagation(),e.showFastenerDialog(!0)}),this.$root.editorManager.getSectionEle().append(r),this.menuBtn=r},destroyed:function(){console.log("DialogFastener::destroyed()"),this.menuBtn.remove(),this.wareObj=null}},o={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"dialog-fastener",on:{click:function(r){r.stopPropagation(),e.showFastenerDialog(!1)}}},[t("div",{staticClass:"dialog-fastener-content",on:{click:function(r){r.stopPropagation(),e.onClickDiv()}}},[t("div",{staticClass:"dialog-fastener-title"},[e._v("扣子数量设定")]),e._v(" "),t("table",{attrs:{border:"0"}},e._l(e.fObjects,function(r,n){return t("tr",{key:n},e._l(r,function(n,a){return t("td",{key:a},[t("div",{staticStyle:{display:"flex","flex-direction":"column"}},[t("img",{attrs:{src:"./static/images/area/fastener-"+a+".png"}}),e._v(" "),t("div",{class:{"dialog-input":!0,"dialog-input-selected":e.sKey===a},on:{click:function(t){t.stopPropagation(),e.onInputFocus(r,a)}}},[e._v(e._s(r[a]))])])])}))})),e._v(" "),t("div",[t("button",{staticClass:"dialog-cancel",on:{click:function(r){r.stopPropagation(),e.showFastenerDialog(!1)}}},[e._v("取消")]),e._v(" "),t("button",{staticClass:"dialog-confirm",on:{click:function(r){r.stopPropagation(),e.saveFastenerCount()}}},[e._v("保存")])])])])},staticRenderFns:[]};var c=t("VU/8")(i,o,!1,function(e){t("f3V/"),t("0pJF")},"data-v-64590d20",null);r.default=c.exports},"f3V/":function(e,r,t){var n=t("ANjj");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("669b2dbd",n,!0,{})},nzQN:function(e,r,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.dialog-fastener-btn {\r\n  top: 10%;\r\n  right: 5%;\r\n  position: absolute;\r\n  color: white;\r\n  font-size: 28px;\r\n  z-index: 100;\r\n  padding: 3px 15px;\r\n  border-radius: 10px;\r\n  border: 3px solid white;\r\n  background-color: rgb(199, 51, 46);\n}\r\n",""])}});