webpackJsonp([19],{FVzd:function(e,t,n){var a=n("W6zY");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("2393feca",a,!0,{})},MsPD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),r=n.n(a),s=n("JaHG"),i={name:"DialogFastener",data:function(){return{isShow:!1,fObjects:[{"square-blue-2":0,"square-red-2":0,"square-blue-4":0,"square-red-4":0},{"circle-blue-2":0,"circle-red-2":0,"circle-blue-4":0,"circle-red-4":0}],sFObject:null,sKey:"",fCounts:null,fasteners:[{name:"block-element",type:"block-image",wareType:"circle-red-2",src:"./static/images/area/fastener-circle-red-2.png",transX:300,transY:300,width:60,height:60,preTransX:300,preTransY:300},{name:"block-element",type:"block-image",wareType:"circle-red-4",src:"./static/images/area/fastener-circle-red-4.png",transX:800,transY:200,width:60,height:60,preTransX:800,preTransY:200},{name:"block-element",type:"block-image",wareType:"square-red-2",src:"./static/images/area/fastener-square-red-2.png",transX:400,transY:250,width:60,height:60,preTransX:400,preTransY:250},{name:"block-element",type:"block-image",wareType:"square-red-4",src:"./static/images/area/fastener-square-red-4.png",transX:540,transY:330,width:60,height:60,preTransX:540,preTransY:330},{name:"block-element",type:"block-image",wareType:"circle-blue-2",src:"./static/images/area/fastener-circle-blue-2.png",transX:666,transY:340,width:60,height:60,preTransX:666,preTransY:340},{name:"block-element",type:"block-image",wareType:"circle-blue-4",src:"./static/images/area/fastener-circle-blue-4.png",transX:385,transY:340,width:60,height:60,preTransX:385,preTransY:340},{name:"block-element",type:"block-image",wareType:"square-blue-2",src:"./static/images/area/fastener-square-blue-2.png",transX:750,transY:310,width:60,height:60,preTransX:750,preTransY:310},{name:"block-element",type:"block-image",wareType:"square-blue-4",src:"./static/images/area/fastener-square-blue-4.png",transX:458,transY:200,width:60,height:60,preTransX:458,preTransY:200}]}},computed:{},methods:{setWareObj:function(e){this.wareObj=e},showFastenerDialog:function(e){var t=this;if(!e||!this.isShow){if(this.sKey="",this.isShow=e,!this.isShow)return this.sFObject=null,void this.$root.editorManager.hideCounter();this.wareObj&&"fastener"===this.wareObj.type&&(this.fObjects.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=0)}),this.wareObj.instances.forEach(function(e){for(var n=0;n<t.fObjects.length;n++)for(var a in t.fObjects[n])if(t.fObjects[n].hasOwnProperty(a)&&e.params.wareType===a){t.fObjects[n][a]++;break}}),this.fCounts=JSON.parse(r()(this.fObjects)))}},onInputFocus:function(e,t){var n=this;this.sFObject=e,this.sKey=t,this.$root.editorManager.showCounter(function(e){if(n.sFObject){var t=""+n.sFObject[n.sKey];if(e){if("confirm"===e)return n.saveFastenerCount(),void n.showFastenerDialog(!1);n.sFObject[n.sKey]=e}else 2===t.length?t=t[0]:t.length<=1&&(t="0"),t=parseInt(t),n.sFObject[n.sKey]=t}})},saveFastenerCount:function(){var e=this;if(this.wareObj&&"fastener"===this.wareObj.type){this.fObjects.forEach(function(t,n){for(var a in t)if(t.hasOwnProperty(a)){var s=t[a]-e.fCounts[n][a];if(s>0){for(var i=void 0,o=e.fasteners,c=o.length,l=0;l<c;l++)if(o[l].wareType===a){i=o[l];break}if(s>0)for(var d=0;d<s;){var p=JSON.parse(r()(i));e.$root.editorManager.loadBlockData(p).setSectionMode(e.$root.editorManager.sectionMode),d++}e.wareObj.resetChangeApply&&e.wareObj.resetChangeApply()}else if(s<0){for(var f=s;f<0;){for(var g=0;g<e.wareObj.instances.length;g++)if(e.wareObj.instances[g].params.wareType===a){e.$root.editorManager.setSelectedObject({instance:e.wareObj.instances[g],type:0}),e.$root.editorManager.delete();break}f++}e.wareObj.resetChangeApply&&e.wareObj.resetChangeApply()}}});var t=Object(s.c)(this.wareObj.instances.length,70,100,130);this.wareObj.instances.forEach(function(e,n){e.params.transX=t[n].x,e.params.transY=t[n].y})}this.showFastenerDialog(!1)},onClickDiv:function(){}},created:function(){},mounted:function(){var e=this,t=document.createElement("BUTTON");t.innerHTML="扣子设定",t.classList.add("dialog-fastener-btn"),t.addEventListener("click",function(t){t.stopPropagation(),e.showFastenerDialog(!0)}),this.$root.editorManager.getSectionEle().append(t),this.menuBtn=t},destroyed:function(){console.log("DialogFastener::destroyed()"),this.menuBtn.remove(),this.wareObj=null}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"dialog-fastener",on:{click:function(t){t.stopPropagation(),e.showFastenerDialog(!1)}}},[n("div",{staticClass:"dialog-fastener-content",on:{click:function(t){t.stopPropagation(),e.onClickDiv()}}},[n("div",{staticClass:"dialog-fastener-title"},[e._v("扣子数量设定")]),e._v(" "),n("table",{attrs:{border:"0"}},e._l(e.fObjects,function(t,a){return n("tr",{key:a},e._l(t,function(a,r){return n("td",{key:r},[n("div",{staticStyle:{display:"flex","flex-direction":"column"}},[n("img",{attrs:{src:"./static/images/area/fastener-"+r+".png"}}),e._v(" "),n("div",{class:{"dialog-input":!0,"dialog-input-selected":e.sKey===r},on:{click:function(n){n.stopPropagation(),e.onInputFocus(t,r)}}},[e._v(e._s(t[r]))])])])}))})),e._v(" "),n("div",[n("button",{staticClass:"dialog-cancel",on:{click:function(t){t.stopPropagation(),e.showFastenerDialog(!1)}}},[e._v("取消")]),e._v(" "),n("button",{staticClass:"dialog-confirm",on:{click:function(t){t.stopPropagation(),e.saveFastenerCount()}}},[e._v("保存")])])])])},staticRenderFns:[]};var c=n("VU/8")(i,o,!1,function(e){n("FVzd"),n("l4jY")},"data-v-49d7a7f2",null);t.default=c.exports},W6zY:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.dialog-fastener[data-v-49d7a7f2] {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  position: absolute;\n  text-align: center;\n  z-index: 100;\n}\n.dialog-fastener-content[data-v-49d7a7f2] {\n  width: 550px;\n  height: auto;\n  position: relative;\n  padding: 20px 50px;\n  border-radius: 15px;\n  background-color: white;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.dialog-fastener-title[data-v-49d7a7f2] {\n  font-size: 25px;\n  margin-bottom: 20px;\n}\ntable[data-v-49d7a7f2] {\n  width: 100%;\n  table-layout: fixed;\n}\ntable td[data-v-49d7a7f2] {\n  height: 50%;\n}\ntd tr[data-v-49d7a7f2] {\n  width: 25%;\n}\ntable img[data-v-49d7a7f2] {\n  width: 65px;\n  height: 65px;\n  margin: 0 auto;\n}\n.dialog-input[data-v-49d7a7f2] {\n  width: 50px;\n  height: 50px;\n  margin: 14px auto 22px auto;\n  line-height: 50px;\n  color: #595959;\n  font-size: 28px;\n  text-align: center;\n  background-color: white;\n  border-radius: 5px;\n  border: 3px solid #bfbfbf;\n}\n.dialog-input-selected[data-v-49d7a7f2] {\n  border-color: black;\n}\n.dialog-cancel[data-v-49d7a7f2] {\n  color: white;\n  font-size: 26px;\n  background-color: rgb(199, 51, 46);\n  border-radius: 10px;\n  border: 3px solid white;\n  margin-right: 87px;\n  padding: 3px 0 3px 20px;\n  word-spacing: 20px;\n  letter-spacing: 20px;\n}\n.dialog-confirm[data-v-49d7a7f2] {\n  color: white;\n  font-size: 26px;\n  background-color: rgb(130, 202, 37);\n  border-radius: 10px;\n  border: 3px solid white;\n  padding: 3px 0 3px 20px;\n  word-spacing: 20px;\n  letter-spacing: 20px;\n}\n",""])},"g+2/":function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.dialog-fastener-btn {\n  top: 10%;\n  right: 5%;\n  position: absolute;\n  color: white;\n  font-size: 28px;\n  z-index: 100;\n  padding: 3px 15px;\n  border-radius: 10px;\n  border: 3px solid white;\n  background-color: rgb(199, 51, 46);\n}\n",""])},l4jY:function(e,t,n){var a=n("g+2/");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("b4afd448",a,!0,{})}});