webpackJsonp([17],{BUAk:function(e,t,i){var n=i("Olj2");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("7d2619fa",n,!0,{})},Dm3i:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAOCAYAAABdC15GAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjdEQzgyMkU3NUM5MTFFOEI1NTVDMjg4NDMzQkUzQUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjdEQzgyMkY3NUM5MTFFOEI1NTVDMjg4NDMzQkUzQUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGN0RDODIyQzc1QzkxMUU4QjU1NUMyODg0MzNCRTNBRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGN0RDODIyRDc1QzkxMUU4QjU1NUMyODg0MzNCRTNBRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PurP90AAAAGWSURBVHjazJW9S8NQFMVvkqaalhBFEAqFgk0htOhk3XXQwa2T/4KDCK7OdnBwdumuOLg5qoNDEbfSIDFdpFRwaJuW2i+T5zulAUHs1qYHDi+5PDg/3uW9K9BfidwL3GFuiVug6Ypxu9wD7j63N2mznMvlYrZtn3e73XfGmMemLw9ZyEQ2GP6Fy+fzRrvdLrGAhGww/Ib02ycahrFcLBbvNE3bcgYVuq8eUrXzQIy5U+2vIEgUj27TTvyStPAatVqt52w2u29ZVh3t9gEXy+XySTqdPusMP+jK3iSss1RUjtGB/jJaTdM8zWQyF7zcw4UQdV1XU6nUMTY+1o5mDgchE9kQWMAENgBKhUJhV5bl1Ub/lSrOLQUlZNd7JoEFTGADYDiZTOKHrOb1+NYHJUZvzs3oizPtgW10gqqqbqBY6zxR0PIZONO6f4KSoigJFOt9M3BAnyESiSR8QJH3XEOx990IHNBnCIVCS2DDM7PC38jP8YibG3meN5AkKQaooeu6TZozcUAHbMJ4rCiTZmBAGnJ//QgwAATKc6jSCwx9AAAAAElFTkSuQmCC"},Olj2:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.mind-map-div[data-v-1d70d0b8] {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\n}\n.mind-map[data-v-1d70d0b8] {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\n}\n.mind-map-canvas[data-v-1d70d0b8] {\r\n  position: absolute;\n}\r\n",""])},ajs4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAoCAYAAADOvcv6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkU3QzFEOEU3NUM5MTFFODlCMTVFNzQ5ODM2RENGNjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkU3QzFEOEY3NUM5MTFFODlCMTVFNzQ5ODM2RENGNjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGRTdDMUQ4Qzc1QzkxMUU4OUIxNUU3NDk4MzZEQ0Y2NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGRTdDMUQ4RDc1QzkxMUU4OUIxNUU3NDk4MzZEQ0Y2NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvMvxKIAAAF4SURBVHjaYmRgYGABYk4gZmWAgP9A/BeKf0HpfwxYAN/v379f/f379wcI//r16/XHjx/PP3nyZNHhw4djVVRURIFqOICYCV2j8H88AGjQy8uXL1cbGhqKIrkKVeOUS5z/Z1+V/L/ursv/Ey8a/r/9cQ1uANAV55qbmzVhmhmhGt+AOJMuobuGkUGFP4jBQXoyAxeLBMP3799vpaamOi9duvQ5AY0QANIUonKIQYBNheH+/fuTlZSUyrGrRAPf/rxgOPA0B8yWlJQMAlJsRGkEgSdf9oNpDg4OSSDFTLTGf/9/w5ggPYxEa0QHoxpHNY5qHNU4qhGikBFeUYHqyv9Ea5ThcQTTP378eA6qbInSyMUiDqyxpoDZz58/XweqqQloZGRQBlZzkarnwDUVqJqrra3tAmlkQVbGzMjBwM4swCDMoc0gyW3NoMofCmaDwKdPn05NmjQpAVg3voS2CwhX5VeuXKnBVpXDGg8/QZjYxgMjuc0VgAADAH4W8KiuI4nuAAAAAElFTkSuQmCC"},vBbu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("pFYg"),s=i.n(n),d=(i("7+uW"),{name:"MindMap",data:function(){return{params:{name:"block-mindmap"},nodeHead:null,nodeMenus:{},editTimer:null,selectEle:null,selectStatus:"normal",skipEvent:!1,canvas:null,ctx:null,sectionMode:"edit",mindMapMode:1,lineColor:"#ACBFEA",lineWidth:3,nodeHeadBgColor:"#AFCFFE",menuPading:"-16px"}},methods:{setMindMapMode:function(e){var t=this;if(this.nodeHead){if(this.mindMapMode===e)return;var i=this.mindMapMode;this.mindMapMode=e,this.sortMindMapNodes(Number.MAX_VALUE).nodes.forEach(function(e){var n=e.getElementsByClassName("mind-map-container-"+(i<3?"1":"2"))[0];n.classList.remove("mind-map-container-"+(i<3?"1":"2")),n.classList.add("mind-map-container-"+(t.mindMapMode<3?"1":"2")),e.expandEle.classList.remove("mind-map-expand-"+(i<3?"1":"2")),e.expandEle.classList.add("mind-map-expand-"+(t.mindMapMode<3?"1":"2"))}),this.resetNodePosition()}},resetParams:function(){var e=this;console.log("MindMap::resetParams()"),this.isParamsExtra=!0;var t=this.sortMindMapNodes(Number.MAX_VALUE);this.params.mindMapMode=this.mindMapMode,this.params.mindmapData=[],t.nodes.forEach(function(t){var i=t.getElementsByClassName("mind-map-text");if(i&&i[0]){var n={content:i[0].innerHTML,top:t.top,left:t.left,childCount:t.mindMapChildren.length};t.isExpand||(n.isExpand=t.isExpand),e.params.mindmapData.push(n)}})},testParams:function(e){this.resetParams(),this.params.mindMapMode=e,console.log(this.params),this.setParams(this.params)},setParams:function(e){var t=this;console.log("MindMap::setParams()"),this.nodeHead&&(this._removeNode(this.nodeHead),this.nodeHead=null),e.mindmapData?function(){t.mindMapMode=e.mindMapMode,t.params.wareType=e.wareType;var i=3===t.mindMapMode?"bottom":"right";t.nodeHead=t.newNodeText(e.mindmapData[0].content,e.mindmapData[0].left,e.mindmapData[0].top,e.mindmapData[0].isExpand),t.nodeHead.childCount=e.mindmapData[0].childCount,t.nodeHead.style.backgroundColor=t.nodeHeadBgColor,t.nodeHead.style.opacity=1,t.nodeHead.style.fontSize="28px";var n=[t.nodeHead],s=[];void 0!==e.mindmapData[0].isExpand&&s.push(t.nodeHead);for(var d=1,a=e.mindmapData.length,o=function(){var a=[];n.forEach(function(n){for(var o=0;o<n.childCount;o++){var l=e.mindmapData[d],r=t.addNode(i,n,l.content,l.left,l.right);r.childCount=l.childCount,l.childCount>0&&a.push(r),void 0!==l.isExpand&&s.push(r),d++}}),n=a};d<a;)o();s.forEach(function(e){t.setNodeExpand(e,!1)}),t.draw()}():console.log("setParams() params lost data")},addMindMap:function(e){this.mindMapMode=e||0,this.nodeHead=this.newNodeText("中心主题",300,200),this.nodeHead.style.backgroundColor=this.nodeHeadBgColor,this.nodeHead.style.opacity=1,this.nodeHead.style.fontSize="28px",this.selectEle=this.nodeHead;for(var t=0;t<4;t++)this.addNode(this.mindMapMode<3?"right":"bottom");this.selectEle=null,this.resetNodePosition()},createNodeMenus:function(){var e=this,t=document.createElement("DIV");t.classList.add("mind-map-menu-tb"),t.style.top=this.menuPading,t.addEventListener("click",function(t){e.addNode("top")}),this.nodeMenus.top={ele:t,display:!0};var i=document.createElement("DIV");i.classList.add("mind-map-menu-tb"),i.style.bottom=this.menuPading,i.style.transform="translate(-50%, 0) rotate(180deg)",i.addEventListener("click",function(t){e.addNode("bottom")}),this.nodeMenus.bottom={ele:i,display:!0};var n=document.createElement("DIV");n.classList.add("mind-map-menu-lr"),n.style.left=this.menuPading,n.style.transform="translate(0, -50%) rotate(180deg)",n.addEventListener("click",function(t){e.addNode("left")}),this.nodeMenus.left={ele:n,display:!0};var s=document.createElement("DIV");s.classList.add("mind-map-menu-lr"),s.style.right=this.menuPading,s.addEventListener("click",function(t){e.addNode("right")}),this.nodeMenus.right={ele:s,display:!0}},setIsSelected:function(e){console.log("setIsSelected() "+e),"edit"===this.sectionMode&&this.$root.editorManager.setSelectedObject(e?{type:0,instance:this}:null)},addNodeMenus:function(){if(this.selectEle){this.selectEle.classList.add("mind-map-selected");var e=this.selectEle.childNodes[0];if(e)for(var t in this.nodeMenus.top.ele.parentNode&&this.removeNodeMenus(),this.nodeMenus)if(this.nodeMenus.hasOwnProperty(t)){var i=this.nodeMenus[t];i.display&&e.appendChild(i.ele)}}},removeNodeMenus:function(){for(var e in this.selectEle&&this.selectEle.classList.remove("mind-map-selected"),this.nodeMenus)if(this.nodeMenus.hasOwnProperty(e)){var t=this.nodeMenus[e];t.ele.remove(),t.display=!0}},addNode:function(e,t,i,n,s){var d=this;3===this.mindMapMode&&(e="top"===e?"left":"bottom"===e?"right":"left"===e?"top":"bottom");var a=void 0;a=t||this.selectEle,"top"!==e&&"bottom"!==e||(a=a.mindMapParent);var o=this.newNodeText(i,n,s);if(o.style.opacity=1,"left"===e){var l=a.mindMapParent.mindMapChildren.findIndex(function(e){return e===a});a.mindMapParent.mindMapChildren.splice(l,1,o),o.mindMapParent=a.mindMapParent,a.mindMapParent=o,o.mindMapChildren.push(a),a=o}else{var r=a.mindMapChildren.length;"right"!==e&&(r=a.mindMapChildren.findIndex(function(e){return e===d.selectEle}),"bottom"===e&&(r+=1)),o.mindMapParent=a,a.mindMapChildren.splice(r,0,o)}return this.setNodeExpand(a,!0),o},removeSelectObj:function(){return this.removeNode(),!1},removeNode:function(){var e=this;if(console.log("removeNode"),this.selectEle){if(this.selectEle===this.nodeHead)return;this.removeNodeMenus(),1===this.selectEle.mindMapParent.mindMapChildren.length&&(this.selectEle.mindMapParent.expandEle.style.display="none");var t=this.selectEle.mindMapParent.mindMapChildren,i=t.findIndex(function(t){return e.selectEle===t});t.splice(i,1),this._removeNode(this.selectEle),this.selectEle=null,this.setIsSelected(!1),this.resetNodePosition()}},_removeNode:function(e){var t=this;e.mindMapChildren.forEach(function(e){t._removeNode(e)}),this.$refs.mindMapDiv.removeChild(e),e.getElementsByClassName("mind-map-text")[0].removeEventListener("blur",this.textEleBlur);var i=e.expandEle;i.removeEventListener("mousedown",this.stopPropagation),i.removeEventListener("click",this.expandEleClick),e.removeEventListener("mousedown",this.nodeEleMouseDown),e.removeEventListener("click",this.nodeEleClick),e.mindMapParent=null,e.mindMapChildren=null,e.mixSize=null,e.expandEle=null},setNodeExpand:function(e,t){e.isExpand=void 0!==t?t:!e.isExpand,e.expandEle.style.display="block",e.expandEle.style.backgroundImage="url(./static/images/mindmap-"+(e.isExpand?"open":"close")+".png)","editing"===this.selectStatus&&(this.setNodeEditable(this.selectEle,!1),this.selectStatus="selected"),this.setChildVisibility(e,e.isExpand),this.resetNodePosition()},setChildVisibility:function(e,t){var i=this;e.mindMapChildren.forEach(function(n){t&&!e.isExpand||(n.style.visibility=t?"visible":"hidden",i.setChildVisibility(n,t))})},setNodeEditable:function(e,t){if(this.$root.isTeacher){var i=e.getElementsByClassName("mind-map-text");i&&i[0]&&(i[0].setAttribute("contenteditable",""+t),t?(i[0].focus(),e.classList.add("mind-map-editing")):(e.classList.remove("mind-map-editing"),this.wareObj&&this.wareObj.resetChangeApply&&this.wareObj.resetChangeApply()))}},resetNodePosition:function(e){var t=this,i=this.sortMindMapNodes(Number.MAX_VALUE);this.calMindMapSize();for(var n=i.indexCounts.length,s=(this.$root.ddmrrScale,0);s<n;s++){var d=i.indexCounts[s],a=d.index+d.count;if(2!==s||2!==this.mindMapMode)for(var o=function(){var e=i.nodes[l],n=e.mindMapChildren.length;if(0===n&&2!==t.mindMapMode)return"continue";var a=e.left,o=e.top;1===t.mindMapMode?(a+=e.clientWidth+30,o+=e.clientHeight/2):2===t.mindMapMode||(a+=e.clientWidth/2,o+=e.clientHeight+50);var h=0,c=0,p=0;if(2===t.mindMapMode){if(1===s){if(o=e.mindMapParent.top+e.mindMapParent.clientHeight/2,l-d.index>1){if(e.left=i.nodes[l-1].left+30,(l-d.index)%2==0){e.left+=i.nodes[l-1].mixSize.width;var m=i.nodes[l-1].mixSize.width;(m-=i.nodes[l-2].mixSize.width)<0&&(e.left-=m)}}else a=e.mindMapParent.left+e.mindMapParent.clientWidth,e.left=a+50,l-d.index==1&&(e.left+=30);if((l-d.index)%2==0?e.top=o-e.clientHeight-30:e.top=o+30,e.mindMapChildren.length>0){var u=(l-d.index)%2==0,M=e.clientHeight;e.mindMapChildren.forEach(function(t,i){t.top=u?e.top-M-e.clientHeight:e.top+M+30,t.left=e.left+30*(i+1),t.style.top=t.top+"px",t.style.left=t.left+"px",M+=t.clientHeight+30})}}e.style.top=e.top+"px",e.style.left=e.left+"px"}else{if(n%2==1){c=(n-1)/2;var f=e.mindMapChildren[c];1===t.mindMapMode?(f.top=o-f.clientHeight/2,f.left=a,h=f.mixSize.height/2):2===t.mindMapMode||(f.top=o,f.left=a-f.clientWidth/2,h=f.mixSize.width/2),f.style.top=f.top+"px",f.style.left=f.left+"px",p=c+1,c-=1}else p=(c=n/2-1)+1;for(r=c;r>=0&&p<n;r--,p++){var v=e.mindMapChildren[r],g=e.mindMapChildren[p];if(1===t.mindMapMode){var x=v.mixSize.height;x<g.mixSize.height&&(x=g.mixSize.height),g.top=o+h+(x-g.clientHeight)/2,g.left=a,h+=x,v.top=o-h+(x-v.clientHeight)/2,v.left=a}else{var E=v.mixSize.width;E<g.mixSize.width&&(E=g.mixSize.width),g.top=o,g.left=a+h+(E-g.clientWidth)/2,h+=E,v.top=o,v.left=a-h+(E-v.clientWidth)/2}g.style.top=g.top+"px",g.style.left=g.left+"px",v.style.top=v.top+"px",v.style.left=v.left+"px"}}},l=d.index;l<a;l++){var r;o()}}this.draw()},sortMindMapNodes:function(e){var t=this;if(!this.nodeHead)return{nodes:[],indexCounts:[]};var i=function(){for(var i=1,n=0,s=1,d=[t.nodeHead],a=[{index:n,count:s}];i<e;){if(d[n].mindMapChildren.forEach(function(e){d.push(e)}),n===s-1){i++;var o=s;if(n===(s=d.length)-1){i--;break}a.push({index:n+1,count:s-o})}n++}return i<e&&a.splice(i),{v:{nodes:d,indexCounts:a}}}();return"object"===(void 0===i?"undefined":s()(i))?i.v:void 0},calMindMapSize:function(){this.nodeHead&&this._calNodeSize(this.nodeHead)},_calNodeSize:function(e){var t=this;if(0!==e.mindMapChildren.length&&e.isExpand){e.mindMapChildren.forEach(function(e){t._calNodeSize(e)});var i=0,n=0;e.mindMapChildren.forEach(function(s){1===t.mindMapMode?(n+=s.mixSize.height,i<e.clientWidth+s.mixSize.width&&(i=e.clientWidth+s.mixSize.width)):2===t.mindMapMode?i<s.mixSize.width&&(i=s.mixSize.width):(i+=s.mixSize.width,n<e.clientHeight+s.mixSize.height&&(n=e.clientHeight+s.mixSize.height))}),1===this.mindMapMode?n<e.clientHeight&&(n=e.clientHeight+10):2===this.mindMapMode?(i<e.clientWidth&&(i=e.clientWidth+10),n=e.clientHeight+10):i<e.clientWidth&&(i=e.clientWidth+10),e.mixSize.width=i,e.mixSize.height=n}else this.resetSlefSize(e)},resetSlefSize:function(e){1===this.mindMapMode?(e.mixSize.width=e.clientWidth+0,e.mixSize.height=e.clientHeight+10):2===this.mindMapMode?(e.mixSize.width=e.clientWidth,e.mixSize.height=e.clientHeight):(e.mixSize.width=e.clientWidth+10,e.mixSize.height=e.clientHeight+0)},stopPropagation:function(e){e.stopPropagation()},textEleBlur:function(e){this.resetNodePosition()},nodeEleMouseDown:function(e){return e.stopPropagation(),this.onMouseDown(e)},nodeEleClick:function(e){e.stopPropagation(),this.onClick(e)},expandEleClick:function(e){e.stopPropagation();var t=e.target.parentElement.parentElement;this.setNodeExpand(t)},newNodeText:function(e,t,i,n){var s=document.createElement("DIV");s.classList.add("mind-map-node"),s.classList.add("mind-map-node-anime"),s.top=0,s.left=0,i&&(s.top=i,s.style.top=s.top+"px"),t&&(s.left=t,s.style.left=s.left+"px"),s.isExpand=void 0===n||n,s.mindMapChildren=[],s.mixSize={};var d=document.createElement("DIV");d.innerHTML=e||"分支主题",d.classList.add("mind-map-text"),d.addEventListener("blur",this.textEleBlur);var a=document.createElement("DIV");a.classList.add("mind-map-container-"+(this.mindMapMode<3?"1":"2")),a.appendChild(d),s.appendChild(a);var o=document.createElement("div");return o.classList.add("mind-map-expand-"+(this.mindMapMode<3?"1":"2")),o.style.display="none",a.appendChild(o),s.addEventListener("mousedown",this.nodeEleMouseDown),s.addEventListener("click",this.nodeEleClick),o.addEventListener("mousedown",this.stopPropagation),o.addEventListener("click",this.expandEleClick),this.$refs.mindMapDiv.appendChild(s),s.mixSize.width=s.clientWidth,s.mixSize.height=s.clientHeight,s.expandEle=o,s},checkMenusDisplay:function(){var e=this;this.selectEle===this.nodeHead?(this.nodeMenus.left.display=!1,this.nodeMenus.top.display=!1,this.mindMapMode<3?this.nodeMenus.bottom.display=!1:this.nodeMenus.right.display=!1):2===this.mindMapMode&&(this.nodeMenus.top.display=!1,this.nodeMenus.bottom.display=!1,this.nodeMenus.left.display=!1,-1===this.nodeHead.mindMapChildren.findIndex(function(t){return t===e.selectEle})&&(this.nodeMenus.right.display=!1))},onMouseDown:function(e){this.$root.isTeacher&&(this.skipEvent=!1,this.selectEle&&(this.selectEle===e.currentTarget?"editing"===this.selectStatus&&(this.skipEvent=!0):(this.setNodeEditable(this.selectEle,!1),this.removeNodeMenus())),this.skipEvent||(this.selectEle=e.currentTarget,this.selectEle.preX=e.screenX,this.selectEle.preY=e.screenY,this.selectStatus="mousedown",this.checkMenusDisplay()),console.log("onMouseDown() "+this.selectStatus))},onMouseMove:function(e){if(this.selectEle&&!this.skipEvent&&("mousedown"===this.selectStatus&&(this.selectStatus="mousemove",this.removeNodeMenus(),this.$refs.mindMapDiv.classList.remove("mind-map-anime")),"mousemove"===this.selectStatus)){var t=this.$root.ddmrrScale;this.selectEle.left+=(e.screenX-this.selectEle.preX)/t,this.selectEle.top+=(e.screenY-this.selectEle.preY)/t,this.selectEle.preX=e.screenX,this.selectEle.preY=e.screenY,this.selectEle.style.left=this.selectEle.left+"px",this.selectEle.style.top=this.selectEle.top+"px",this.selectEle===this.nodeHead?this.resetNodePosition():this.draw()}},onMouseUp:function(e){this.selectEle&&!this.skipEvent&&("mousemove"===this.selectStatus&&(this.$refs.mindMapDiv.classList.add("mind-map-anime"),this.selectEle=null,this.setIsSelected(!1)),console.log("onMouseUp() "+this.selectStatus))},onClick:function(e){var t=this;this.selectEle&&!this.skipEvent&&(this.setIsSelected(!0),this.selectStatus="click",null!=this.editTimer?(clearTimeout(this.editTimer),this.editTimer=null,this.setNodeEditable(this.selectEle,!0),this.removeNodeMenus(),this.selectStatus="editing"):this.editTimer=setTimeout(function(){t.addNodeMenus(),t.selectStatus="selected",t.editTimer=null},300))},onClickMindMapDiv:function(){console.log("onClickMindMapDiv() "+this.selectStatus),"editing"===this.selectStatus?(this.setNodeEditable(this.selectEle,!1),this.checkMenusDisplay(),this.addNodeMenus(),this.selectStatus="selected"):"selected"===this.selectStatus&&(this.removeNodeMenus(),this.selectStatus="normal",this.selectEle=null,this.setIsSelected(!1))},releaseDdmrr:function(){this.selectEle&&this.onClickMindMapDiv()},draw:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.nodeHead.isExpand&&(2===this.mindMapMode?this._drawPath1():(this.ctx.beginPath(),this._drawPath(this.nodeHead),this.ctx.stroke()))},_drawPath:function(e){var t=this,i=this.lineWidth/2;if(3===this.mindMapMode&&e.mindMapChildren.length>0){var n=e.left+e.clientWidth/2,s=e.top+e.clientHeight/2;this.ctx.moveTo(n+i,s),this.ctx.lineTo(n+i,s+50)}e.mindMapChildren.forEach(function(n,s){if(1===t.mindMapMode){var d=e.left+e.clientWidth-12,a=e.top+e.clientHeight/2,o=n.left+12,l=n.top+n.clientHeight/2;t.ctx.moveTo(d,a+i),t.ctx.quadraticCurveTo(d,l+i,o,l+i)}else{var r=e.left+e.clientWidth/2,h=e.top+e.clientHeight/2,c=n.left+n.clientWidth/2,p=n.top+n.clientHeight/2,m=15,u=(e.mindMapChildren.length-1)/2;s>u?m=-m:s===u&&(m=0),t.ctx.moveTo(r+i,h+50),t.ctx.lineTo(c+m+i,h+50),t.ctx.quadraticCurveTo(c+i,h+50,c+i,h+50+Math.abs(m)),t.ctx.lineTo(c+i,p)}n.isExpand&&t._drawPath(n)})},_drawPath1:function(){var e=this,t=this.lineWidth/2,i=this.nodeHead.left+this.nodeHead.clientWidth,n=this.nodeHead.top+this.nodeHead.clientHeight/2,s=50,d=50;this.nodeHead.mindMapChildren.forEach(function(e,t){t%2==0?s+=e.mixSize.width+50:d+=e.mixSize.width+50});this.ctx.lineWidth=1.5*this.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(i,n+1.5*t),this.ctx.lineTo(i+(s>d?s:d),n+1.5*t),this.ctx.stroke(),this.ctx.lineWidth=this.lineWidth,this.ctx.beginPath(),this.nodeHead.isExpand&&this.nodeHead.mindMapChildren.forEach(function(i,s){var d=i.left,a=i.top+i.clientHeight/2;e.ctx.moveTo(d-30,n+t),e.ctx.lineTo(d,a+t),i.isExpand&&i.mindMapChildren.length>0&&i.mindMapChildren.forEach(function(i){e.ctx.moveTo(d,a+t),e.ctx.lineTo(i.left,i.top+i.clientHeight/2+t),d=i.left,a=i.top+i.clientHeight/2})}),this.ctx.stroke()}},created:function(){window.mindMap=this},mounted:function(){var e=this.$refs.mindMapDiv;this.canvas=e.getElementsByTagName("CANVAS")[0],this.canvas.setAttribute("width",e.clientWidth+"px"),this.canvas.setAttribute("height",e.clientHeight+"px"),this.ctx=this.canvas.getContext("2d"),this.ctx.lineWidth=this.lineWidth,this.ctx.strokeStyle=this.lineColor,this.createNodeMenus()}}),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mind-map-div",on:{mousedown:function(t){e.onClickMindMapDiv()}}},[i("div",{ref:"mindMapDiv",staticClass:"mind-map mind-map-anime",on:{mousemove:function(t){e.onMouseMove(t)},mouseup:function(t){e.onMouseUp(t)}}},[i("canvas",{staticClass:"mind-map-canvas"})])])},staticRenderFns:[]};var o=i("VU/8")(d,a,!1,function(e){i("BUAk"),i("x5lo")},"data-v-1d70d0b8",null);t.default=o.exports},x5lo:function(e,t,i){var n=i("xVJQ");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("1cc20da3",n,!0,{})},xVJQ:function(e,t,i){var n=i("kxFB");(e.exports=i("FZ+f")(!1)).push([e.i,"\n.mind-map-node {\r\n  width: auto;\r\n  height: auto;\r\n  position: absolute;\r\n  color: #506a99;\r\n  font-size: 24px;\r\n  text-align: center;\r\n  border: 3px solid #acbfea;\r\n  border-radius: 10px;\r\n  background-color: #deeaff;\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n  -webkit-user-select: none;\r\n     -moz-user-select: none;\r\n      -ms-user-select: none;\r\n          user-select: none;\r\n  opacity: 0;\n}\n.mind-map-anime .mind-map-node-anime {\r\n  -webkit-transition-duration: 300ms;\r\n          transition-duration: 300ms;\r\n  -webkit-transition-property: opacity, top, left;\r\n  transition-property: opacity, top, left;\n}\n.mind-map-node:hover {\r\n  cursor: pointer;\n}\n.mind-map-selected {\r\n  border-color: #79b76d;\n}\n.mind-map-editing {\r\n  border-color: #79b76d;\n}\n.mind-map-container-1 {\r\n  position: relative;\r\n  padding: 8px 28px 8px 12px;\n}\n.mind-map-container-2 {\r\n  position: relative;\r\n  padding: 8px 12px 8px 12px;\r\n  text-align: center;\n}\n.mind-map-editing .mind-map-text:hover {\r\n  cursor: text;\n}\n.mind-map-expand-1 {\r\n  width: 24px;\r\n  height: 24px;\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 50%;\r\n  -webkit-transform: translate(0, -50%);\r\n          transform: translate(0, -50%);\r\n  cursor: crosshair;\n}\n.mind-map-expand-2 {\r\n  width: 24px;\r\n  height: 24px;\r\n  position: absolute;\r\n  left: 50%;\r\n  bottom: -12px;\r\n  -webkit-transform: translate(-50%, 0) rotate(90deg);\r\n          transform: translate(-50%, 0) rotate(90deg);\r\n  cursor: crosshair;\n}\n.mind-map-menu-lr {\r\n  width: 14px;\r\n  height: 40px;\r\n  position: absolute;\r\n  top: 50%;\r\n  -webkit-transform: translate(0, -50%);\r\n          transform: translate(0, -50%);\r\n  background-image: url("+n(i("ajs4"))+");\r\n  z-index: 100;\n}\n.mind-map-menu-tb {\r\n  width: 40px;\r\n  height: 14px;\r\n  position: absolute;\r\n  left: 50%;\r\n  -webkit-transform: translate(-50%, 0);\r\n          transform: translate(-50%, 0);\r\n  background-image: url("+n(i("Dm3i"))+");\r\n  z-index: 100;\n}\r\n",""])}});